#!/bin/bash

# Set variables
DATA_FOLDER=$1
OUTPUT_FOLDER=$2
LANG=$3                         # "de" or "en" or "en-fw"
FILETYPE=$4                     # "gz" for OSCAR files, "txt" for .txt files

# Filter all files in folder for gender-fair forms
mkdir -p $OUTPUT_FOLDER

if [ "$FILETYPE" = "gz" ]; then
    echo "Extracting gender-fair forms from gz. files."
    for filepath in $DATA_FOLDER/*.gz
        do filename=$(basename $filepath)
        gunzip -c $filepath | bash scripts/filter_for_gender-fair_forms_$LANG.sh > $OUTPUT_FOLDER/$filename.txt
    done

elif [ "$FILETYPE" = "txt" ]; then
    echo "Extracting gender-fair forms from txt. files."
    for filepath in $DATA_FOLDER/*.txt
        do filename=$(basename $filepath)
        cat $filepath | bash scripts/filter_for_gender-fair_forms_$LANG.sh > $OUTPUT_FOLDER/$filename
    done

else
    echo "The filetype" $FILETYPE "is not yet supported, please update this script."
fi

echo "Done. Finished extracting gender-fair forms."
